<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="mobileStyle.css">

    <link rel="icon" type="image/x-icon" href="favicon.ico">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/66a42373e4.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.0/gsap.min.js"></script>

    <meta content="maps.iplabs.ink" property="og:title">
    <meta content="A Splatoon map list generator created by Inkling Performance Labs." property="og:description" />
    <meta content="https://maps.iplabs.ink" property="og:url">
    <meta content="#2df8a4" data-react-helmet="true" name="theme-color">
    <meta content="https://maps.iplabs.ink/IPL_maps.png" property="og:image" />
    
    <title>maps.iplabs.ink</title>
</head>
<body style="opacity: 0;">
    <div class="start-page-wrapper" id="start-page-wrapper">
        <div class="start-page-title sp-textin">
            Welcome to MAPS.IPLABS.INK
        </div>
        <div class="start-page-subtext sp-textin">
            A Splatoon map generator created by <a href="http://iplabs.ink/">Inkling Performance Labs</a> for the tournament organizers and players in the community <i class="fa-solid fa-heart"></i>
        </div>
        <div class="start-page-tutorial sp-textin">
            <b><i class="fa-solid fa-graduation-cap"></i> A very quick tutorial:</b><br>
            <i class="fa-solid fa-arrow-right"></i> Create a map pool for each of the five modes in the game. Add as many or as few maps as you'd like.<br>
            <i class="fa-solid fa-arrow-right"></i> Once your map pool is finished, add the rounds that appear in your tournament. Each round needs a name and the number of games within it.<br>
            <i class="fa-solid fa-arrow-right"></i> Finally, choose a generate option to create a map list. You can have the app try to make one, or you can make one from scratch if desired. You can always edit the final result.<br>
            <i class="fa-solid fa-arrow-right"></i> Once your map list is finished, you can export it as a discord message, or JSON file, or share it via URL.<br>
            <br>
            <b><i class="fa-solid fa-lightbulb"></i> More tips:</b><br>
            <i class="fa-solid fa-arrow-right"></i> You can quickly create a graphic of your map pool to screenshot by clicking the 'Show Map Pool Graphic' button.<br>
            <i class="fa-solid fa-arrow-right"></i> You can share your map pool with someone by sharing the URL provided in the Save or Share Map Pool button.<br>
            <i class="fa-solid fa-arrow-right"></i> Once you've generated a map list, you can view how often a map/mode appears by clicking the stats button<br>
            
        </div>
        <div class="start-page-button sp-textin" id="start-page-button">Start <i class="fa-solid fa-play"></i></div>
    </div>
    <div class="header">
        <div class="logo-wrapper">
            <i class="fa-regular fa-map"></i>
            <img src="ipl-mono-bold.svg">
            MAPS.IPLABS.INK
        </div>
        <div class="mobile-nav-bar">
            <button class="active button" id="settings-tab">Settings</button>
            <button class="button" id="maplist-tab">Map list</button>
        </div>
    </div>
    <div class="column-container">
        <div class="options-panel">

            <div class="splat-2-warn">Using Splatoon 2 maps: switch to Splatoon 3 maps in the <a onclick="document.getElementById('preferences-button').click()">preferences menu</a>.</div>

            <div class="menu-header">Edit Map Pool</div>
            <button class="map-picker button" id="tw-picker">
                <div class="title">Turf War Maps</div>
                <div class="detail" id="tw-picker-detail">0 Maps selected <i class="right-bias fa-solid fa-circle-chevron-right"></i></div>
            </button>
            <button class="map-picker button" id="sz-picker">
                <div class="title">Splat Zones Maps</div>
                <div class="detail" id="sz-picker-detail">0 Maps selected <i class="right-bias fa-solid fa-circle-chevron-right"></i></div>
            </button>
            <button class="map-picker button" id="tc-picker">
                <div class="title">Tower Control Maps</div>
                <div class="detail" id="tc-picker-detail">0 Maps selected <i class="right-bias fa-solid fa-circle-chevron-right"></i></div>
            </button>
            <button class="map-picker button" id="rm-picker">
                <div class="title">Rainmaker Maps</div>
                <div class="detail" id="rm-picker-detail">0 Maps selected <i class="right-bias fa-solid fa-circle-chevron-right"></i></div>
            </button>
            <button class="map-picker button" id="cb-picker">
                <div class="title">Clam Blitz Maps</div>
                <div class="detail" id="cb-picker-detail">0 Maps selected <i class="right-bias fa-solid fa-circle-chevron-right"></i></div>
            </button>

            <div class="menu-header">Map Pool Tools</div>
            <button class="pool-option button" id="save-button" onclick="saveOnClick()">
                <div class="title">Save or Share Current Map Pool</div>
                <div class="detail"><i class="right-bias fa-solid fa-circle-chevron-right"></i></div>
            </button>
            <button class="pool-option button" id="load-button" onclick="loadOnClick()">
                <div class="title">Load Existing Map Pool</div>
                <div class="detail"><i class="right-bias fa-solid fa-circle-chevron-right"></i></div>
            </button>
            <button class="pool-option button" id="map-visual-button">
                <div class="title">Show Map Pool Graphic</div>
                <div class="detail"><i class="right-bias fa-solid fa-circle-chevron-right"></i></div>
            </button>
            <button class="pool-option button" id="export-to-sendouink-button">
                <div class="title">Use Map Pool in sendou.ink</div>
                <div class="detail"><i class="right-bias fa-solid fa-circle-chevron-right"></i></div>
            </button>

            <div class="menu-header">Edit Rounds</div>
            <div class="round-editor" id="round-editor"></div>
            <div class="add-round-header">Add Round</div>
            <div class="round-adder">
                <input type="text" id="round-name" maxlength="32" placeholder="Name"></input>
                <div class="round-adder-split">
                    <input type="number" min="1" max="15" step="2" id="round-games-input" placeholder="Games"></input>
                    <label for="round-counterpick-check" class="detail">Counterpick&nbsp;
                        <input id="round-counterpick-check" type="checkbox">
                    </label>
                    <button class="button" id="add-round-button">Add <i class="right-bias fa-solid fa-circle-chevron-right"></i></button>
                </div>
            </div>
            <div class="error-message" id="round-error-message" style="display: none"></div>
            
            <div class="menu-header">Generate</div>
            <div class="error-message" id="generate-error-message" style="display: none;"></div>
            <button class="generate button" onclick="prepGeneration(generateMaps)">
                <div class="title">Generate All</div>
                <div class="detail">Maps and modes <i class="right-bias fa-solid fa-circle-chevron-right"></i></div>
            </button>
            <button class="generate button" onclick="prepGeneration(generateModes)">
                <div class="title">Generate Modes Only</div>
                <div class="detail">Chooses modes only <i class="right-bias fa-solid fa-circle-chevron-right"></i></div>
            </button>
            <button class="generate button" onclick="prepGeneration(generateEmptyRounds)">
                <div class="title">Generate Empty Rounds</div>
                <div class="detail">No maps or modes selected <i class="right-bias fa-solid fa-circle-chevron-right"></i></div>
            </button>
        </div>

        
        <div class="maps-panel mobile-hidden" id="maps-panel">
            <div class="generate-container" id="generate-container">
                <div class="maps-instruction" id="maps-instruction">
                    Add maps to the map pool.<br>
                    Add rounds.<br>
                    Choose a generate option.    
                </div> 
            </div>
            <div class="maps-footer-buttons-container" id="export-buttons-container">
                <button class="maps-footer button" id="stats-button"><i class="left-bias fa-solid fa-chart-bar"></i>Stats</button>
                <button class="maps-footer button" id="export-button-discord"><i class="left-bias fa-brands fa-discord"></i>Discord Message</button>
                <button class="maps-footer button" id="export-button-url"><i class="left-bias fa-solid fa-code"></i></i>Share URL</button>
                <button class="maps-footer button" id="export-button-json" onclick="exportToJSONFile()"><i class="left-bias fa-solid fa-file-code"></i>Export JSON</button>
            </div>
        </div>
    </div>

    <div class="modal-container" id="modal-container">
        <div class="modal-content green" id="tw-picker-modal">
            <div class="modal-header">
                <div class="modal-title">Turf War Maps</div>
                <button class="button exit" id="tw-picker-close"><i class="fa-solid fa-circle-xmark"></i></button>
            </div>
            <div class="picker-select-shortcuts">
                <button class="button select-all" id="tw-select-all"><i class="left-bias fa-solid fa-list-check"></i> Select All</button>
                <button class="button deselect-all" id="tw-deselect-all"><i class="left-bias fa-solid fa-list-ul"></i> Deselect All</button>
            </div>
            <div id="tw-picker-wrapper"></div>
        </div>
        <div class="modal-content green" id="sz-picker-modal">
            <div class="modal-header">
                <div class="modal-title">Splat Zones Maps</div>
                <button class="button exit" id="sz-picker-close"><i class="fa-solid fa-circle-xmark"></i></button>
            </div>
            <div class="picker-select-shortcuts">
                <button class="button select-all" id="sz-select-all"><i class="left-bias fa-solid fa-list-check"></i> Select All</button>
                <button class="button deselect-all" id="sz-deselect-all"><i class="left-bias fa-solid fa-list-ul"></i> Deselect All</button>
            </div>
            <div id="sz-picker-wrapper"></div>
        </div>
        <div class="modal-content green" id="tc-picker-modal">
            <div class="modal-header">
                <div class="modal-title">Tower Control Maps</div>
                <button class="button exit" id="tc-picker-close"><i class="fa-solid fa-circle-xmark"></i></button>
            </div>
            <div class="picker-select-shortcuts">
                <button class="button select-all" id="tc-select-all"><i class="left-bias fa-solid fa-list-check"></i> Select All</button>
                <button class="button deselect-all" id="tc-deselect-all"><i class="left-bias fa-solid fa-list-ul"></i> Deselect All</button>
            </div>
            <div id="tc-picker-wrapper"></div>
        </div>
        <div class="modal-content green" id="rm-picker-modal">
            <div class="modal-header">
                <div class="modal-title">Rainmaker Maps</div>
                <button class="button exit" id="rm-picker-close"><i class="fa-solid fa-circle-xmark"></i></button>
            </div>
            <div class="picker-select-shortcuts">
                <button class="button select-all" id="rm-select-all"><i class="left-bias fa-solid fa-list-check"></i> Select All</button>
                <button class="button deselect-all" id="rm-deselect-all"><i class="left-bias fa-solid fa-list-ul"></i> Deselect All</button>
            </div>
            <div id="rm-picker-wrapper"></div>
        </div>
        <div class="modal-content green" id="cb-picker-modal">
            <div class="modal-header">
                <div class="modal-title">Clam Blitz Maps</div>
                <button class="button exit" id="cb-picker-close"><i class="fa-solid fa-circle-xmark"></i></button>
            </div>
            <div class="picker-select-shortcuts">
                <button class="button select-all" id="cb-select-all"><i class="left-bias fa-solid fa-list-check"></i> Select All</button>
                <button class="button deselect-all" id="cb-deselect-all"><i class="left-bias fa-solid fa-list-ul"></i> Deselect All</button>
            </div>
            <div id="cb-picker-wrapper"></div>
        </div>

        <div class="modal-content green" id="map-visual-modal" style="max-width: 95vw;">
            <div class="modal-header">
                <div class="modal-title">Map Pool Graphic</div>
                <button class="button exit" id="map-visual-close"><i class="fa-solid fa-circle-xmark"></i></button>
            </div>
            <div class="map-visual-toolbar">
                <div class="button" id="map-visual-zoomout"><i class="fa-solid fa-magnifying-glass-minus"></i></div>
                <div class="button" id="map-visual-zoomin"><i class="fa-solid fa-magnifying-glass-plus"></i></div>
            </div>
            <table class="map-visual-table" id="map-visual-table">
            </table>
        </div>

        <div class="modal-content green" id="save-modal">
            <div class="modal-header">
                <div class="modal-title">Save or Share Map Pool</div>
                <button class="button exit" id="save-close"><i class="fa-solid fa-circle-xmark"></i></button>
            </div>
            <div class="detail">Save locally</div>
            <input type="text" class="save-name" id="save-name" placeholder="Name" maxlength="32">
            <button class="save-button button" id="save-button"  onclick="saveDialogOnClick()"><i class="left-bias fa-solid fa-floppy-disk"></i> Save</button>
            <div style="margin: 8px;"></div>
            <div class="detail">Save/Share via URL</div>
            <input type="text" style="font-size: .7em;" class="save-name" id="save-url" value="" readonly>
        </div>

        <div class="modal-content green" id="load-modal">
            <div class="modal-header">
                <div class="modal-title">Load Map Pool</div>
                <button class="button exit" id="load-close"><i class="fa-solid fa-circle-xmark"></i></button>
            </div>
            <div class="load-container" id="load-container">
                <div class="load-wrapper">
                    <div class="load-name">Name</div>
                    <button class="button load-button"><i class="left-bias fa-solid fa-floppy-disk"></i>Load</button>
                    <button class="button load-delete"><i class="left-bias fa-solid fa-trash"></i>Delete</button>
                </div>
            </div>
        </div>

        <div class="modal-content red" id="stats-modal">
            <div class="modal-header">
                <div class="modal-title">Map List Stats</div>
                <button class="button exit" id="stats-close"><i class="fa-solid fa-circle-xmark"></i></button>
            </div>
            <div class="stats-nav" id="stats-nav">
                <button class="button" id="stats-button-options">Options</button>
                <button class="button" id="stats-button-tw">Turf War</button>
                <button class="button" id="stats-button-sz">Splat Zones</button>
                <button class="button" id="stats-button-tc">Tower Control</button>
                <button class="button" id="stats-button-rm">Rainmaker</button>
                <button class="button" id="stats-button-cb">Clam Blitz</button>
            </div>
            <div class="stats-options" id="stats-options">
            </div>
            <div class="stats-container" id="stats-container">
            </div>
            <div class="stats-footer">
                Removing maps from the current map pool after generating will cause them to not appear here.
            </div>
        </div>

        <div class="modal-content red" id="discord-export-modal">
            <div class="modal-header">
                <div class="modal-title">Discord Message</div>
                <button class="button exit" id="discord-export-close"><i class="fa-solid fa-circle-xmark"></i></button>
            </div>
            <div class="text-export-subtitle">Copy and paste this message into your Discord channel.</div>
            <textarea class="text-export-textarea" id="discord-export-textarea" readonly></textarea>
            <button class="button" id="discord-export-copy"><i class="left-bias fa-solid fa-clipboard-list"></i>Copy</button>
        </div>

        <div class="modal-content red" id="url-export-modal">
            <div class="modal-header">
                <div class="modal-title">Share via URL</div>
                <button class="button exit" id="url-export-close"><i class="fa-solid fa-circle-xmark"></i></button>
            </div>
            <div class="text-export-subtitle">Copy and paste this URL into a browser.</div>
            <textarea type="text" class="text-export-textarea" id="url-export-textarea" rows="12" readonly></textarea>
            <button class="button" id="url-export-copy"><i class="left-bias fa-solid fa-clipboard-list"></i>Copy</button>
        </div>

        <div class="modal-content green" id="about-modal">
            <div class="modal-header">
                <div class="modal-title">About</div>
                <button class="button exit" id="about-close"><i class="fa-solid fa-circle-xmark"></i></button>
            </div>
            <div class="about-container">
                <img src="IPL_maps.png">
                <p><b>MAPS.IPLABS.INK</b> was created by .jpg. Find me on twitter <a href="https://twitter.com/PlayLowInk">@PlayLowInk</a> or on discord at .jpg#8000. Feel free to suggest ideas on how to improve this app!</p>
                <p>This tool was created specifically for use by Inkling Performance Labs, but anyone is welcome to use it.</p>
                <p>Visit <a href="http://iplabs.ink/">Inkling Performance Labs</a> for more information about us. We run high quality Splatoon events to help grow the competitive scene.</p>
            </div>
        </div>

        <div class="modal-content green" id="preferences-modal">
            <div class="modal-header">
                <div class="modal-title">Preferences</div>
                <button class="button exit" id="preferences-close"><i class="fa-solid fa-circle-xmark"></i></button>
            </div>
            <div class="sorting-menu">Game
                <select id="game-setting">
                    <option value="splat3">Splatoon 3</option>
                    <option value="splat2">Splatoon 2</option>
                </select>
            </div>
            <button id="game-change-reload" class="save-button button" style="display: none; animation: button_show .6s 1; animation-fill-mode: forwards;" onclick="gameChangeOnClick()"><i class="fa-solid fa-arrows-rotate fa-spin left-bias"></i>Reload to change game</button>
            <div class="sorting-menu">Preferred Map Order
                <select id="preferred-sort-setting">
                    <option value="release">Release order</option>
                    <option value="alpha">Alphabetical order</option>
                </select>
            </div>
            <label for="contrast-toggle">
                <div class="map-name">Higher Contrast</div>
                <input type="checkbox" id="contrast-toggle">
            </label>
            <label for="font-size-toggle">
                <div class="map-name">Consistent Text Size<br><div style="font-size: .6em">Text size will scale with display size when unchecked.</div></div>
                <input type="checkbox" id="font-size-toggle">
            </label>
        </div>
    </div>

    <div class="footer">
        <a href="https://maps.iplabs.ink/?pool=tw:d60402;sz:960422;tc:d64400;rm:8a5002;cb:cc1020&rounds=Groups_Round_1:2-0,3-3,4-10;Groups_Round_2:0-12,1-5,2-8;Groups_Round_3:3-21,4-4,0-0;Top_Cut_Quarter_Finals:1-4,2-2,3-10,4-0,0-5;Top_Cut_Semi_Finals:1-2,2-4,3-5,4-17,0-21;Grand_Finals:1-12,5-un,5-un,5-un,5-un,5-un,5-un">Example</a>
        ·
        <a onclick="" style="text-decoration: underline; text-underline-offset: .1em; cursor: pointer;" id="about-button">About</a>
        ·
        <a onclick="" style="text-decoration: underline; text-underline-offset: .1em; cursor: pointer;" id="preferences-button">Preferences</a>
    </div>
</body>

<script src="data.js"></script>
<script src="init.js"></script>
<script src="generate.js"></script>
<script>showUi()</script>

</html>